{"version":3,"sources":["components/news-item.tsx","components/news-list.tsx","components/preloader.tsx","store/action.ts","components/news-form.tsx","components/content.tsx","utils/const.ts","components/header.tsx","App.tsx","store/reducer.ts","index.tsx"],"names":["NewsItem","item","date","Date","created_at","itemDate","toLocaleDateString","day","month","year","itemTime","toLocaleTimeString","hour","minute","className","title","description","author","name","lastname","connect","state","news","length","map","id","Preloader","ActionTypes","dispatch","setUserNews","newsItem","type","payload","formRef","useRef","useState","newsForm","setNewsForm","handleInputChange","evt","target","value","handleInputChangeAuthor","onSubmit","preventDefault","now","toString","substr","console","log","Math","random","current","reset","ref","placeholder","onChange","required","loading","loadNews","setLoading","status","useEffect","fetch","then","response","json","data","articles","Header","App","initialState","store","createStore","action","composeWithDevTools","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.715e6194.chunk.js","sourcesContent":["import {connect} from 'react-redux';\r\nimport {StateType} from '../types/types';\r\n\r\ninterface NewsItemPropsType {\r\n  item: {\r\n    id: number,\r\n    title: string,\r\n    description: string,\r\n    created_at: Date,\r\n    author: {\r\n      name: string,\r\n      lastname: string,\r\n    }\r\n  }\r\n};\r\n\r\nconst NewsItem = ({item}: NewsItemPropsType) => {\r\n\r\n  const date = new Date(item.created_at);\r\n  const itemDate = date.toLocaleDateString(`ru`, {day: `numeric`, month: `long`, year: `numeric`});\r\n  const itemTime = date.toLocaleTimeString(`ru`, {hour: `numeric`, minute: `numeric`});\r\n  return (\r\n    <>\r\n    <hr />\r\n    <div className=\"hor-padding\">\r\n      <p>{`${itemDate} ${itemTime}`}</p>\r\n      <h3>{item.title}</h3>\r\n      <p>{item.description}</p>\r\n      <p>{item.author.name == `` &&  item.author.lastname == `` ? `Анонимный автор` : `Автор: ${item.author.name} ${item.author.lastname}`}</p>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewsItem;","\r\nimport {connect} from 'react-redux';\r\nimport {StateType} from '../types/types';\r\nimport NewsItem from './news-item';\r\n\r\ninterface NewsListPropsType {\r\n  news?: any[]\r\n};\r\n\r\nconst NewsList = ({news}: NewsListPropsType) => {\r\n\r\n  let quantityNewsText: string;\r\n\r\n  const setQuantityNewsText = (): string => {\r\n    if(news.length % 10 === 1 && news.length !== 11) {\r\n      return quantityNewsText = `новость`;\r\n    }\r\n    if(news.length % 10 < 5 && news.length % 10 !== 0) {\r\n      if(news.length > 10 && news.length < 15) {\r\n        return quantityNewsText = `новостей`;\r\n      } else {\r\n        return quantityNewsText = `новости`;\r\n      }\r\n    }\r\n    return quantityNewsText = `новостей`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"page__news-wrapper\">\r\n    {news.length === 0 ?\r\n      <h2 className=\"hor-padding\">Новостей нет</h2> :\r\n      <h2 className=\"hor-padding\">{`${news.length}`} {setQuantityNewsText()}</h2>  \r\n    }\r\n    <div className=\"page__news\">\r\n        {news.map((item) =>\r\n            <NewsItem item={item} key={item.id} />\r\n        )}\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// export default NewsList;\r\n\r\nconst mapStateToProps = (state: StateType) => ({\r\n  news: state.news,\r\n});\r\n\r\n// const mapDispatchToProps = (dispatch: (arg0: any) => void) => ({\r\n//   loadNews: (news: any[]) => dispatch(setNews(news)),\r\n//   setLoading: (status: boolean) => dispatch(setLoading(status)),\r\n// });\r\n\r\nexport {NewsList};\r\nexport default connect(mapStateToProps, null)(NewsList);","import React from 'react';\r\n\r\nconst Preloader = () => {\r\n  return (\r\n    <div className=\"page__loading-spinner\"></div>\r\n  );\r\n};\r\n\r\nexport default Preloader;","export const ActionTypes = {\r\n  SET_NEWS: `news/setNews`,\r\n  SET_LOADING: `news/setLoading`,\r\n  SET_USER_NEWS: `news/setUserNews`\r\n};\r\n\r\nexport const setNews = (payload: any[]) => ({ \r\n  type: ActionTypes.SET_NEWS,\r\n  payload\r\n});\r\nexport const setLoading = (payload: boolean) => ({\r\n  type: ActionTypes.SET_LOADING,\r\n  payload\r\n});\r\nexport const setUserNews = (payload: any) => ({\r\n  type: ActionTypes.SET_USER_NEWS,\r\n  payload\r\n});\r\n","import React, { useRef, useState } from \"react\";\r\nimport {setUserNews} from '../store/action';\r\nimport {connect} from 'react-redux';\r\n\r\ninterface NewsFormPropsType {\r\n  setUserNews: (e: any) => void, \r\n}\r\n\r\n\r\nconst NewsForm = ({setUserNews}: NewsFormPropsType) => {\r\n\r\n  const formRef: any = useRef();\r\n\r\n  const [newsForm, setNewsForm] = useState({\r\n    id: null,\r\n    title: ``,\r\n    description: ``,\r\n    created_at: null,\r\n    author: {\r\n      name: ``,\r\n      lastname: ``,\r\n    }\r\n});\r\n\r\n  const handleSubmit = (evt: { preventDefault: () => void; }) => {\r\n    evt.preventDefault();\r\n\r\n    setUserNews({\r\n      ...newsForm,\r\n      id: Date.now().toString(36).substr(2, 7),\r\n      created_at: new Date(),\r\n    });\r\n\r\n    console.log(Math.random().toString(36).substr(2, 12));\r\n    // setUserNews(newsForm);\r\n    \r\n    formRef.current.reset();\r\n    setNewsForm({\r\n      id: null,\r\n      title: ``,\r\n      description: ``,\r\n      created_at: null,\r\n      author: {\r\n        name: ``,\r\n        lastname: ``,\r\n      }\r\n  });\r\n  };\r\n\r\n  const handleInputChange = (evt: { target: { name: string; value: string; }; }) => {\r\n    const {name, value} = evt.target;\r\n    setNewsForm({...newsForm, [name]: value});\r\n  };\r\n\r\n  const handleInputChangeAuthor = (evt: { target: { name: string; value: string; }; }) => {\r\n    const {name, value} = evt.target;\r\n    setNewsForm({\r\n      ...newsForm, \r\n      author:{\r\n        ...newsForm.author,\r\n        [name]: value\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} ref={formRef} className=\"page__form form hor-padding\">\r\n      <h2>Добавить новость</h2>\r\n      <label>\r\n        <p className=\"form__input-text\">Новость</p>\r\n        <input className=\"form__input\" type=\"text\" placeholder=\"Заголовок\" name=\"title\" value={newsForm.title} onChange={handleInputChange} required/>\r\n      </label>\r\n      <textarea placeholder=\"Текст новости\" name=\"description\" value={newsForm.description} onChange={handleInputChange} required></textarea>\r\n      <div>\r\n        <label>\r\n          <p className=\"form__input-text\">Автор</p>\r\n          <input className=\"form__input\" type=\"text\" placeholder=\"Имя\" name=\"name\" value={newsForm.author.name} onChange={handleInputChangeAuthor} />\r\n        </label>\r\n        <label>\r\n          <input className=\"form__input\" type=\"text\" placeholder=\"Фамилия\" name=\"lastname\" value={newsForm.author.lastname} onChange={handleInputChangeAuthor} />\r\n        </label>\r\n      </div>\r\n      <button className=\"form__btn\" type=\"submit\">Добавить новость</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: (arg0: any) => void) => ({\r\n  setUserNews: (newsItem: any) => dispatch(setUserNews(newsItem)),\r\n});\r\n\r\nexport {NewsForm};\r\nexport default connect(null, mapDispatchToProps)(NewsForm);","import React, {useEffect} from 'react';\r\nimport NewsList from './news-list';\r\nimport Preloader from './preloader';\r\nimport {API_URL} from '../utils/const';\r\nimport {setNews, setLoading} from '../store/action';\r\nimport {connect} from 'react-redux';\r\nimport {StateType} from '../types/types';\r\nimport NewsForm from './news-form';\r\n\r\n interface ContentPropsType {\r\n  loadNews: (e: any[]) => void, \r\n  loading: boolean, \r\n  setLoading: (e: boolean) => void,\r\n}\r\n\r\nconst Content = ({loadNews, loading, setLoading}: ContentPropsType) => {\r\n\r\n  useEffect(() => {\r\n    fetch(API_URL)\r\n    .then(response => response.json())\r\n    .then(response => {\r\n      response.data.articles && loadNews(response.data.articles);\r\n        setLoading(false);\r\n    });\r\n}, []);\r\n\r\n  return (\r\n    < div className=\"page__content\">\r\n      {loading ?\r\n      <Preloader /> :\r\n      <div className=\"page__wrapper\">\r\n        <NewsList />\r\n        <NewsForm />\r\n      </div>\r\n\r\n    }\r\n    \r\n  </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: StateType) => ({\r\n  loading: state.loading,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: (arg0: any) => void) => ({\r\n  loadNews: (news: any[]) => dispatch(setNews(news)),\r\n  setLoading: (status: boolean) => dispatch(setLoading(status)),\r\n});\r\n\r\nexport {Content};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Content);","export const API_URL = `https://test-api-app-for-react.herokuapp.com/api/v1/news`;","import React from 'react';\r\n\r\nconst Header = () => {\r\nreturn (\r\n  <>\r\n    <header className=\"page__header header\">\r\n      <h1 className=\"header__title\">Новости</h1>\r\n    </header>\r\n  </>\r\n  );\r\n}\r\n\r\nexport default Header;","import React from 'react';\nimport Content from './components/content';\nimport Header from './components/header';\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <Content />\n    </>\n  );\n}\n\nexport default App;\n","import {ActionTypes} from './action';\r\nimport {StateType} from '../types/types'\r\n\r\n\r\ntype ActionType = {\r\n  type: string,\r\n  payload?: any,\r\n};\r\n\r\nconst initialState: StateType = {\r\n  news: [],\r\n  loading: true,\r\n};\r\n\r\nconst reducer = (state: StateType = initialState, action: ActionType): StateType => {\r\n  switch (action.type) {\r\n    case ActionTypes.SET_NEWS:\r\n      return {\r\n        ...state,\r\n        news: action.payload\r\n      };\r\n    case ActionTypes.SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: action.payload,\r\n      };\r\n    case ActionTypes.SET_USER_NEWS:\r\n      return {\r\n        ...state,\r\n        news: [\r\n          ...state.news,\r\n          action.payload,\r\n        ],\r\n      };\r\n    default:\r\n      return {...state};\r\n  }\r\n};\r\n\r\nexport {reducer};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nimport {Provider} from 'react-redux';\nimport {reducer} from './store/reducer';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport {createStore} from 'redux';\n\nconst store = createStore(\n  reducer,\n  composeWithDevTools()\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}